<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Year Bin vs. Color Differences</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative;
        }
        canvas {
            max-width: 80%;
            max-height: 80%;
        }
        @keyframes moveDownArrow {
            0% { transform: translateY(0) scale(1); }
            50% { transform: translateY(10px) scale(1.2); }
            100% { transform: translateY(0) scale(1); }
        }
        .arrow-container {
            position: absolute;
            text-align: center;
            animation: moveDownArrow 1s infinite;
            cursor: pointer;
        }
        .arrow {
            color: red;
            font-size: 36px;
            font-weight: bold;
        }
        .click-text {
            color: red;
            font-size: 18px;
            margin-bottom: 5px;
        }
        .dim-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            font-size: 24px;
            padding: 20px;
            box-sizing: border-box;
        }
        .message {
            display: inline-block;
            white-space: nowrap;
            overflow: hidden;
            border-right: 3px solid white;
            animation: typing 3s steps(50, end), blink-caret 0.75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: white; }
        }
    </style>
</head>
<body>
    <canvas id="colorChart"></canvas>
    <div class="arrow-container" id="arrow-container">
        <div class="click-text">Click Me!</div>
        <div class="arrow">â†“</div>
    </div>
    <div class="dim-overlay" id="dim-overlay">
        <div class="message" id="message"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const data = [13.97, 13.60, 29.80, 16.27, 10.33];
        const minIndex = data.indexOf(Math.min(...data));

        const ctx = document.getElementById('colorChart').getContext('2d');
        const colorChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Before 1900', '1900-1930', '1930-1960', '1960-2000', 'After 2000'],
                datasets: [{
                    label: 'Color Differences of Two Spaces',
                    data: data,
                    borderColor: 'white',
                    backgroundColor: 'rgba(255, 255, 255, 0.2)',
                    borderWidth: 2,
                    pointRadius: 5,
                    pointBackgroundColor: function(context) {
                        return context.dataIndex === minIndex ? 'red' : 'white';
                    },
                }]
            },
            options: {
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Year Bin',
                            color: 'white'
                        },
                        ticks: {
                            color: 'white'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.2)'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Color Differences (%)',
                            color: 'white'
                        },
                        ticks: {
                            color: 'white'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.2)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: 'white'
                        }
                    }
                }
            }
        });

        const arrowContainer = document.getElementById('arrow-container');
        const dimOverlay = document.getElementById('dim-overlay');
        const messageElement = document.getElementById('message');

        function updateArrowPosition() {
            const meta = colorChart.getDatasetMeta(0);
            const x = meta.data[minIndex].x;
            const y = meta.data[minIndex].y;

            arrowContainer.style.left = `${x - 18}px`;  // Adjusted for centering
            arrowContainer.style.top = `${y - 50}px`;  // Positioned above the point
        }

        arrowContainer.addEventListener('click', () => {
            dimOverlay.style.display = 'flex';
            const messageText = "Could it be that as social media evolves, the colors in these two spaces are merging?";
            messageElement.textContent = messageText;
        });

        // Update arrow position initially and on each render
        updateArrowPosition();
        colorChart.update();

        let hasScrolled = false;

window.addEventListener('wheel', function(event) {
    if (event.deltaY > 0 && !hasScrolled) { // Detect downward scroll
        hasScrolled = true;
        window.location.href = 'fic.html';  // Redirect to fic.html
    }
});
    </script>
</body>
</html>
