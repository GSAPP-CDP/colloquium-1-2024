<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Digital Tapestry</title>
    <link rel="stylesheet" href="style.css">
    <style>
         
         body {
        background-image: url('dotgrid.jpg');
        background-repeat: repeat;
        background-size: 480px 240px; /* Adjust this value for smaller/larger pattern */
        background-attachment: fixed;
        }
        .header-logo {
            position: fixed;
            top: 35px;
            left: 50px;
            z-index: 1000;
        }

        .header-logo img {
            width: 300px; /* Adjust this value as needed */
            height: auto;
            top: 20px;
            left: 50px;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        main {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }

        @font-face {
            font-family: 'DogicaBold';
            src: url('fonts/dogicabold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
        }
        @font-face {
            font-family: 'Dogica';
            src: url('fonts/dogica.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        #typewriter-container {
            position: absolute;
            top: 110px; /* Adjust this value to position it below 'intro' */
            left: 50px;
            width: 300px; /* Adjust width as needed */
            font-family: 'Dogica', sans-serif;
            font-size: 8px;
            line-height: 1.8;
            color: #333; /* Adjust color as needed */
            z-index: 1000; /* Ensure it's above other elements */
        }

        #typewriter-text {
            margin: 0;
            white-space: pre-wrap; /* Preserves line breaks */
        }

        #svgContainer {
            top:6%;
            width: 90%;
            height: 90%;
            margin-left: 20%; /* This moves the SVG to the right */
            position: relative; /* Add this if not already present */

        }
        #nodeSvg {
            width: 95%;
            height: 95%;
            display: block;
        }
        .node {
            cursor: pointer;
            transition: transform 0.5s ease;
        }
        .node:hover {
            animation: shake 0.6s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            30% { transform: translateX(-1px); }
            75% { transform: translateX(1px); }
        }
        @keyframes float2 {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(5px); }
        }
        #hidden_threads, #the_data_story, #the_journey, #unveiling_the_barriers,
        #disconnected_paths, #data_catalog, #co_creative_fabric, #memory_tiles {
            animation: float2 3s ease-in-out infinite;
        }
        .popup {
            display: none;
            position: absolute;
            background-color: white;
            padding: 10px;
            border: 1px solid black;
            z-index: 1000;
            flex-shrink: 0;
        }
        .closePopup {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border:1.5px solid #B1F7B8;
            font-family: 'Dogica', sans-serif;
            font-size: 7px;
            cursor: pointer;
            z-index: 1001; /* Ensure it's above other content */
        }

        #popup_for_hidden_threads {
            width: 738px;
            height: 510px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            justify-content: left;
            align-items: center;
            text-align: left;
            padding: 20px;
            box-sizing: border-box;
        }
        #popup_for_hidden_threads h2 {
            font-family: 'DogicaBold', sans-serif;
            font-size: 10px;
            margin-bottom: 20px;
        }
        #popup_for_hidden_threads p {
            font-family: 'Dogica', sans-serif;
            font-size: 8px;
        }
        #popup_for_hidden_threads iframe {
            width: 100%;
            height: calc(100% - 100px);
            border: none;
        }
        #popup_for_the_data_story {
            width: 497px;
            height: 570px;
            top: 10%;
            right: 50%;
        }

        #popup_for_the_data_story p {
            font-family: 'Dogica', sans-serif;
            font-size: 7px;
            margin-bottom: 20px;
        }

        #popup_for_the_journey {
            width: 391px;
            height: 604px;
            top: 10%;
            left: 50%;
        }
        #popup_for_unveiling_the_barriers {
            width: 820px;
            height: 720px;
            bottom: 2%;
            left: 10%;
        }
        #popup_for_unveiling_the_barriers h2 {
            font-family: 'DogicaBold', sans-serif;
            font-size: 10px;
            top: 30px;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        #popup_for_unveiling_the_barriers p {
            font-family: 'Dogica', sans-serif;
            font-size: 9px;
        }

        #popup_for_disconnected_paths {
            width: 546px;
            height: 490px;
            top: 20%;
            right: 10%;
        }

        #popup_for_disconnected_paths h2 {
            font-family: 'DogicaBold', sans-serif;
            font-size: 8px;
            top: 30px;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        #popup_for_disconnected_paths p {
            font-family: 'Dogica', sans-serif;
            font-size: 8px;
        }
        #popup_for_data_catalog {
            width: 500px;
            height: 700px;
            top: 3%;
            left: 15%;
        }
        #popup_for_data_catalog_2 {
            width: 580px;
            height: 330px;
            top: 10%;
            right: 8%;
        }
        #popup_for_data_catalog_2 .image-container {
            width: 580px;
            height: 286px;
            overflow: hidden;
            margin-top: 5%; /* Adds space above the image container */

}
        #popup_for_data_catalog_2 .image-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        /* Adjust the close button position if needed */
        #popup_for_data_catalog_2 .closePopup {
            top: 10px;
            right: 10px;
}
        #popup_for_data_catalog_3 {
            width: 580px;
            height: 180px;
            bottom: 14%;
            right: 8%;
        }
        .closePopup, .download-button {
            background: none;
            border: 1.5px solid #B1F7B8;
            font-family: 'Dogica', sans-serif;
            font-size: 7px;
            cursor: pointer;
            padding: 5px 10px;
            color: black;
            text-decoration: none;
            display: inline-block;
        }

        .download-links {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-top: 20px;
        }

        .download-links section {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .download-description {
            font-family: 'Dogica', sans-serif;
            font-size: 7px;
            margin-left: 10px;
        }

        #popup_for_data_catalog_3 .closePopup {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1001;
        }

        .closePopup:hover, .download-button:hover {
            background-color: #B1F7B8;
            color: white;
        }

        #popup_for_co_creative_fabric {
            width: 739px;
            height: 413px;
            bottom: 15%;
            right: 5%;
        }

        #popup_for_co_creative_fabric h2 {
            font-family: 'DogicaBold', sans-serif;
            font-size: 8px;
            top: 30px;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        #popup_for_memory_tiles {
            width: 480px;
            height: 330px;
            top: 28%;
            left: 47%;
        }

        #popup_for_memory_tiles h2 {
            font-family: 'DogicaBold', sans-serif;
            font-size: 8px;
            top: 30px;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        #popup_for_memory_tiles p {
            font-family: 'Dogica', sans-serif;
            font-size: 8px;
        }

    </style>
</head>
<body>
    <main>
        <div class="header-logo">
            <img src="/header.svg" alt="Header Logo">
          </div>

        <div id="typewriter-container">
            <p id="typewriter-text"></p>
        </div>

        <div id="svgContainer">
            <svg id="nodeSvg" preserveAspectRatio="xMidYMid meet">
                <!-- SVG content will be loaded here -->
            </svg>
        </div>
        <div id="popup_for_hidden_threads" class="popup" style="display: none;">
            <button class="closePopup">Close</button>
            <h2>"What if I tell you there are these craft communities located just right under your nose?"</h2>
            <p>Explore the hidden alleys of Bangkok through this interactive map, where ancient crafts quietly thrive amidst urban sprawl.</p>
            <iframe src="commu/commu.html" width="600px" height="300px"></iframe>
        </div>
        <div id="popup_for_the_data_story" class="popup">
            <button class="closePopup">Close</button>
            <section>
            <iframe src="https://editor.p5js.org/panyanus.j/full/hKgtTom96" width="490px" height="500px"></iframe>
        </section>
        <section>
            <p>Hidden within the bustling streets of Bangkok, these doorways are the silent guardians of our cultural heritage. Each entrance leads to a world where traditional crafts thrive amidst urban chaos. By unveiling these hidden gems, we aim to preserve their stories and celebrate the rich tapestry of our past. Let us walk through these doors and embrace the beauty and resilience of our craft communities.</p>
        </section>
        </div>
        <div id="popup_for_the_journey" class="popup">
            <button class="closePopup">Close</button>
            <iframe src="bio.svg" width="100%" height="100%" style="border: none;"></iframe>
        </div>
        <div id="popup_for_unveiling_the_barriers" class="popup">
            <button class="closePopup">Close</button>
            <h2>What if I told you that vibrant craft communities are thriving just beneath the surface, obscured by the rapid urbanization of Bangkok?</h2>
            <section>
                <iframe src="https://editor.p5js.org/panyanus.j/full/28tphxeNc" width="820px" height="600px" style="border:none;"></iframe>
            </section>
            <p>"What if the towering buildings of the city were not just symbols of progress but barriers that obscure the rich cultural heritage of craft communities?‚Äù </p>
        </div>
        <div id="popup_for_disconnected_paths" class="popup" style="display: none;">
            <button class="closePopup">Close</button>
            <h2>What if modern transportation networks could lead to the rediscovery and revitalization of traditional craft communities?"</h2>
            <iframe src="train mapping/train.html" width="540px" height="390px"></iframe>
            <p>The accessibility of transportation might not just connect people but also offer opportunities to rediscover and support these traditional communities, which could otherwise fade into obscurity.</p>
        </div>
        <div id="popup_for_data_catalog" class="popup">
            <button class="closePopup">Close</button>
            <iframe src="datacatalog1.svg" width="100%" height="100%" style="border: none;"></iframe>
        </div>
        <div id="popup_for_data_catalog_2" class="popup">
            <button class="closePopup">Close</button>
            <div class="image-container">
                <img src="ending.jpg" alt="Ending image">
            </div>
        </div>
        <div id="popup_for_data_catalog_3" class="popup">
            <button class="closePopup">Close</button>
            <div class="download-links">
                <section>
                    <a href="train mapping/Old Craft Communities in Bangkok.csv" download class="download-button">Download Data</a>
                    <span class="download-description">Old Craft Communities in Bangkok</span>
                </section>
                <section>
                    <a href="train mapping/train_station.csv" download class="download-button">Download Data</a>
                    <span class="download-description">Train Station in Bangkok</span>
                </section>
                <section>
                    <a href="commu/Event Participation Records.csv" download class="download-button">Download Data</a>
                    <span class="download-description">Arts and Design Event Participation Records in Bangkok</span>
                </section>
                <section>
                    <a href="commu/Number and utilization of buildings in a Creative Economy District.csv" download class="download-button">Download Data</a>
                    <span class="download-description">Number and utilization of buildings in a Creative Economy District</span>
                </section>
                <section>
                    <a href="commu/Financial statements of businesses in the Creative Economy District.csv" download class="download-button">Download Data</a>
                    <span class="download-description">Financial statements of businesses in the Creative Economy District</span>
                </section>
            </div>
        </div>
        <div id="popup_for_co_creative_fabric" class="popup">
            <button class="closePopup">Close</button>
            <iframe style="border: 1px solid rgba(0, 0, 0, 0.1);" width="680" height="350" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FSbRCjgTDOoV62Q9dqEVpkf%2F8bit-Authorship-Zine%3Fpage-id%3D0%253A1%26node-id%3D46-24%26starting-point-node-id%3D46%253A24%26scaling%3Dscale-down%26content-scaling%3Dfixed%26t%3Dcx5alBadTVJkf8rZ-1" allowfullscreen></iframe>      
           <h2>"What if an interactive zine could be the tool that transforms co-creation and co-authorship into a tapestry of stories, beautifully reflecting the community's collective memory and creativity?"</h2>          
        </div>
        <div id="popup_for_memory_tiles" class="popup">
            <button class="closePopup">Close</button>
            <iframe width="425" height="230" src="https://www.youtube.com/embed/Jbs1z6t4-SQ?si=JyXbPDaU2aAA1GFx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            <h2>"Bangkok Memory Tiles"</h2>
            <p>Interactive, conceptual tiles are installed in public spaces, where stepping on tiles triggers visual and auditory experiences related to Bangkok's cultural heritage. In the center, a larger interactive panel allows users to record and share their stories, contributing to the community's collective memory and participatory governance.</p>

        </div>
    </main>

    <script>

const typewriterText = `Welcome to my digital tapestry, where I weave the threads of traditional Thai crafts with the vibrant strands of modern digital technology. This tapestry is a living, breathing collaboration, highlighting the rich cultural heritage of Bangkok's craft communities and their innovative journey towards rejuvenation.`;
        let i = 0;
        const speed = 40; // Adjust typing speed (lower is faster)

        function typeWriter() {
            if (i < typewriterText.length) {
                document.getElementById("typewriter-text").innerHTML += typewriterText.charAt(i);
                i++;
                setTimeout(typeWriter, speed);
            }
        }

        // Start the typewriter effect when the page loads
        window.addEventListener('load', typeWriter);
        const closePopups = document.querySelectorAll('.closePopup');
        closePopups.forEach(button => {
            button.addEventListener('click', () => {
                const popup = button.closest('.popup');
                popup.style.display = 'none';
                activeNode = null;
            });
        });
        
        const nodeNames = {
            intro: "Intro",
            hidden_threads: "Hidden Threads",
            the_data_story: "The Data Story",
            the_journey: "The Journey",
            unveiling_the_barriers: "Unveiling the Barriers",
            disconnected_paths: "Disconnected Paths",
            data_catalog: "Data Catalog",
            co_creative_fabric: "Co-Creative Fabric",
            memory_tiles: "Memory Tiles"
        };

        let activeNode = null;

        fetch('tapestry.svg')
            .then(response => response.text())
            .then(svgContent => {
                const svgElement = document.getElementById('nodeSvg');
                svgElement.innerHTML = svgContent;
                
                // Adjust viewBox to fit the content
                const bbox = svgElement.getBBox();
                svgElement.setAttribute('viewBox', `${bbox.x} ${bbox.y} ${bbox.width} ${bbox.height}`);
                
                setupNodeInteractions();
            });

        function setupNodeInteractions() {
            Object.keys(nodeNames).forEach(nodeId => {
                const node = document.getElementById(nodeId);
                if (node) {
                    node.classList.add('node');
                    node.addEventListener('click', () => toggleNodePopup(nodeId));
                    
                    // Add a random delay to the floating animation for specific nodes
                    if (nodeId !== 'intro') {
                        const delay = Math.random() * 6; // Random delay between 0 and 6 seconds
                        node.style.animationDelay = `-${delay}s`;
                    }
                }
            });
        }

        function toggleNodePopup(nodeId) {
            const node = document.getElementById(nodeId);
            
            if (activeNode && activeNode !== node) {
                const prevPopups = document.querySelectorAll('.popup');
                prevPopups.forEach(popup => popup.style.display = 'none');
            }
            
            activeNode = node;
            console.log(`Node ${nodeId} clicked`);
            
            if (nodeId === 'data_catalog') {
                document.getElementById('popup_for_data_catalog').style.display = 'block';
                document.getElementById('popup_for_data_catalog_2').style.display = 'block';
                document.getElementById('popup_for_data_catalog_3').style.display = 'block';
            } else {
                const popup = document.getElementById(`popup_for_${nodeId}`);
                popup.style.display = 'block';
            }
        }
    </script>
</body>
</html>